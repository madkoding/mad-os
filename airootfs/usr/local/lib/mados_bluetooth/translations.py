"""madOS Bluetooth Configuration - Internationalization translations.

Provides translations for 6 languages: English, Spanish, French,
German, Chinese (Simplified), and Japanese.
"""

TRANSLATIONS = {
    'English': {
        'title': 'madOS Bluetooth',
        'bt_config': 'Bluetooth Configuration',
        'scan': 'Scan',
        'scanning': 'Scanning...',
        'pair': 'Pair',
        'connect': 'Connect',
        'disconnect': 'Disconnect',
        'remove': 'Remove',
        'trust': 'Trust',
        'untrust': 'Untrust',
        'connecting': 'Connecting...',
        'pairing': 'Pairing...',
        'connected': 'Connected',
        'disconnected': 'Disconnected',
        'paired': 'Paired',
        'not_paired': 'Not Paired',
        'trusted': 'Trusted',
        'failed': 'Failed',
        'pair_failed': 'Pairing failed',
        'connect_failed': 'Connection failed',
        'devices': 'Devices',
        'available_devices': 'Available Devices',
        'paired_devices': 'Paired Devices',
        'no_devices': 'No devices found',
        'no_adapter': 'No Bluetooth adapter detected',
        'adapter_off': 'Bluetooth is turned off',
        'power': 'Power',
        'power_on': 'Turn On',
        'power_off': 'Turn Off',
        'device_info': 'Device Information',
        'address': 'Address',
        'type': 'Type',
        'status': 'Status',
        'error': 'Error',
        'success': 'Success',
        'cancel': 'Cancel',
        'close': 'Close',
        'confirm_remove': 'Remove this device?',
    },

    'Español': {
        'title': 'madOS Bluetooth',
        'bt_config': 'Configuración Bluetooth',
        'scan': 'Buscar',
        'scanning': 'Buscando...',
        'pair': 'Emparejar',
        'connect': 'Conectar',
        'disconnect': 'Desconectar',
        'remove': 'Eliminar',
        'trust': 'Confiar',
        'untrust': 'No confiar',
        'connecting': 'Conectando...',
        'pairing': 'Emparejando...',
        'connected': 'Conectado',
        'disconnected': 'Desconectado',
        'paired': 'Emparejado',
        'not_paired': 'No emparejado',
        'trusted': 'De confianza',
        'failed': 'Fallido',
        'pair_failed': 'Error al emparejar',
        'connect_failed': 'Error al conectar',
        'devices': 'Dispositivos',
        'available_devices': 'Dispositivos disponibles',
        'paired_devices': 'Dispositivos emparejados',
        'no_devices': 'No se encontraron dispositivos',
        'no_adapter': 'No se detectó adaptador Bluetooth',
        'adapter_off': 'Bluetooth está apagado',
        'power': 'Encendido',
        'power_on': 'Encender',
        'power_off': 'Apagar',
        'device_info': 'Información del dispositivo',
        'address': 'Dirección',
        'type': 'Tipo',
        'status': 'Estado',
        'error': 'Error',
        'success': 'Éxito',
        'cancel': 'Cancelar',
        'close': 'Cerrar',
        'confirm_remove': '¿Eliminar este dispositivo?',
    },

    'Français': {
        'title': 'madOS Bluetooth',
        'bt_config': 'Configuration Bluetooth',
        'scan': 'Analyser',
        'scanning': 'Analyse en cours...',
        'pair': 'Appairer',
        'connect': 'Connecter',
        'disconnect': 'Déconnecter',
        'remove': 'Supprimer',
        'trust': 'Faire confiance',
        'untrust': 'Ne pas faire confiance',
        'connecting': 'Connexion en cours...',
        'pairing': 'Appairage en cours...',
        'connected': 'Connecté',
        'disconnected': 'Déconnecté',
        'paired': 'Appairé',
        'not_paired': 'Non appairé',
        'trusted': 'De confiance',
        'failed': 'Échoué',
        'pair_failed': "Échec de l'appairage",
        'connect_failed': 'Échec de la connexion',
        'devices': 'Appareils',
        'available_devices': 'Appareils disponibles',
        'paired_devices': 'Appareils appairés',
        'no_devices': 'Aucun appareil trouvé',
        'no_adapter': 'Aucun adaptateur Bluetooth détecté',
        'adapter_off': 'Le Bluetooth est désactivé',
        'power': 'Alimentation',
        'power_on': 'Activer',
        'power_off': 'Désactiver',
        'device_info': "Informations sur l'appareil",
        'address': 'Adresse',
        'type': 'Type',
        'status': 'Statut',
        'error': 'Erreur',
        'success': 'Succès',
        'cancel': 'Annuler',
        'close': 'Fermer',
        'confirm_remove': 'Supprimer cet appareil?',
    },

    'Deutsch': {
        'title': 'madOS Bluetooth',
        'bt_config': 'Bluetooth-Konfiguration',
        'scan': 'Suchen',
        'scanning': 'Suche läuft...',
        'pair': 'Koppeln',
        'connect': 'Verbinden',
        'disconnect': 'Trennen',
        'remove': 'Entfernen',
        'trust': 'Vertrauen',
        'untrust': 'Nicht vertrauen',
        'connecting': 'Verbindung wird hergestellt...',
        'pairing': 'Kopplung läuft...',
        'connected': 'Verbunden',
        'disconnected': 'Getrennt',
        'paired': 'Gekoppelt',
        'not_paired': 'Nicht gekoppelt',
        'trusted': 'Vertraut',
        'failed': 'Fehlgeschlagen',
        'pair_failed': 'Kopplung fehlgeschlagen',
        'connect_failed': 'Verbindung fehlgeschlagen',
        'devices': 'Geräte',
        'available_devices': 'Verfügbare Geräte',
        'paired_devices': 'Gekoppelte Geräte',
        'no_devices': 'Keine Geräte gefunden',
        'no_adapter': 'Kein Bluetooth-Adapter erkannt',
        'adapter_off': 'Bluetooth ist ausgeschaltet',
        'power': 'Strom',
        'power_on': 'Einschalten',
        'power_off': 'Ausschalten',
        'device_info': 'Geräteinformationen',
        'address': 'Adresse',
        'type': 'Typ',
        'status': 'Status',
        'error': 'Fehler',
        'success': 'Erfolg',
        'cancel': 'Abbrechen',
        'close': 'Schließen',
        'confirm_remove': 'Dieses Gerät entfernen?',
    },

    '中文': {
        'title': 'madOS 蓝牙',
        'bt_config': '蓝牙配置',
        'scan': '扫描',
        'scanning': '正在扫描...',
        'pair': '配对',
        'connect': '连接',
        'disconnect': '断开',
        'remove': '移除',
        'trust': '信任',
        'untrust': '取消信任',
        'connecting': '正在连接...',
        'pairing': '正在配对...',
        'connected': '已连接',
        'disconnected': '已断开',
        'paired': '已配对',
        'not_paired': '未配对',
        'trusted': '已信任',
        'failed': '失败',
        'pair_failed': '配对失败',
        'connect_failed': '连接失败',
        'devices': '设备',
        'available_devices': '可用设备',
        'paired_devices': '已配对设备',
        'no_devices': '未找到设备',
        'no_adapter': '未检测到蓝牙适配器',
        'adapter_off': '蓝牙已关闭',
        'power': '电源',
        'power_on': '开启',
        'power_off': '关闭',
        'device_info': '设备信息',
        'address': '地址',
        'type': '类型',
        'status': '状态',
        'error': '错误',
        'success': '成功',
        'cancel': '取消',
        'close': '关闭',
        'confirm_remove': '移除此设备？',
    },

    '日本語': {
        'title': 'madOS Bluetooth',
        'bt_config': 'Bluetooth 設定',
        'scan': 'スキャン',
        'scanning': 'スキャン中...',
        'pair': 'ペアリング',
        'connect': '接続',
        'disconnect': '切断',
        'remove': '削除',
        'trust': '信頼',
        'untrust': '信頼しない',
        'connecting': '接続中...',
        'pairing': 'ペアリング中...',
        'connected': '接続済み',
        'disconnected': '切断済み',
        'paired': 'ペアリング済み',
        'not_paired': '未ペアリング',
        'trusted': '信頼済み',
        'failed': '失敗',
        'pair_failed': 'ペアリング失敗',
        'connect_failed': '接続失敗',
        'devices': 'デバイス',
        'available_devices': '利用可能なデバイス',
        'paired_devices': 'ペアリング済みデバイス',
        'no_devices': 'デバイスが見つかりません',
        'no_adapter': 'Bluetoothアダプターが検出されません',
        'adapter_off': 'Bluetoothがオフです',
        'power': '電源',
        'power_on': 'オン',
        'power_off': 'オフ',
        'device_info': 'デバイス情報',
        'address': 'アドレス',
        'type': 'タイプ',
        'status': 'ステータス',
        'error': 'エラー',
        'success': '成功',
        'cancel': 'キャンセル',
        'close': '閉じる',
        'confirm_remove': 'このデバイスを削除しますか？',
    },
}


def detect_system_language():
    """Detect the system language from environment variables.

    Returns:
        The language name matching available translations, or 'English'.
    """
    import os
    import locale

    lang_code = None
    for var in ['LC_ALL', 'LC_MESSAGES', 'LANG', 'LANGUAGE']:
        lang_code = os.environ.get(var)
        if lang_code:
            break

    if not lang_code:
        try:
            # Prefer LC_MESSAGES locale; fall back to the general locale if needed.
            lang_tuple = locale.getlocale(locale.LC_MESSAGES)
            if not lang_tuple or not lang_tuple[0]:
                lang_tuple = locale.getlocale()
            if lang_tuple and lang_tuple[0]:
                lang_code = lang_tuple[0]
        except Exception:
            pass

    if not lang_code:
        return 'English'

    lang_prefix = lang_code.split('_')[0].split('.')[0].lower()

    lang_map = {
        'en': 'English',
        'es': 'Español',
        'fr': 'Français',
        'de': 'Deutsch',
        'zh': '中文',
        'ja': '日本語',
    }

    return lang_map.get(lang_prefix, 'English')


def get_text(key, language='English'):
    """Retrieve a translated string for the given key and language.

    Args:
        key: The translation key to look up.
        language: The language name (default: 'English').

    Returns:
        The translated string, or the English fallback, or the key itself.
    """
    lang_dict = TRANSLATIONS.get(language, TRANSLATIONS['English'])
    return lang_dict.get(key, TRANSLATIONS['English'].get(key, key))

[Unit]
Description=Install OpenCode if not already present
After=network-online.target pacman-init.service
Wants=network-online.target
# Only run if opencode binary is not found
ConditionPathExists=!/usr/bin/opencode

[Service]
Type=oneshot
RemainAfterExit=yes
Environment=HOME=/home/mados
ExecStart=/usr/local/bin/setup-opencode.sh
StandardOutput=journal+console
StandardError=journal+console
TimeoutStartSec=300

[Install]
WantedBy=multi-user.target
